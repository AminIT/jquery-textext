<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Jasmine Spec Runner</title>

  <script type="text/javascript" src="vendor/jquery.js"></script>
  <script type="text/javascript" src="vendor/coffee-script.js"></script>

  <link rel="stylesheet" type="text/css" href="vendor/mocha.css">
  <script type="text/javascript" src="vendor/mocha.js"></script>
  <script type="text/javascript" src="vendor/chai.js"></script>
  <script type="text/javascript" src="vendor/chai-jquery.js"></script>
  <script type="text/javascript" src="vendor/sinon-chai.js"></script>
  <script type="text/javascript" src="vendor/sinon.js"></script>

  <script>
    mocha.setup('bdd')
  </script>

  <!-- CORE -->
  <script type="text/javascript" src="build/textext.jquery.js"></script>
  <script type="text/javascript" src="build/vendor/eventemitter2.js"></script>
  <script type="text/javascript" src="build/vendor/watch.js"></script>
  <script type="text/javascript" src="build/vendor/resistance.js"></script>
  <script type="text/javascript" src="build/utils.js"></script>
  <script type="text/javascript" src="build/plugin.js"></script>
  <script type="text/javascript" src="build/items_manager.js"></script>
  <script type="text/javascript" src="build/ui_plugin.js"></script>
  <script type="text/javascript" src="build/items_ui_plugin.js"></script>
  <script type="text/javascript" src="build/textext.js"></script>

  <script type="text/coffeescript" src="textext.spec.coffee"></script>
  <script type="text/coffeescript" src="utils.spec.coffee"></script>
  <script type="text/coffeescript" src="plugin.spec.coffee"></script>
  <script type="text/coffeescript" src="items_manager.spec.coffee"></script>
  <script type="text/coffeescript" src="ui_plugin.spec.coffee"></script>
  <script type="text/coffeescript" src="items_ui_plugin.spec.coffee"></script>

  <!-- PLUGINS -->
  <script type="text/javascript" src="build/keys_plugin.js"></script>
  <script type="text/coffeescript" src="keys_plugin.spec.coffee"></script>

  <script type="text/javascript" src="build/input_plugin.js"></script>
  <script type="text/coffeescript" src="input_plugin.spec.coffee"></script>

  <script type="text/javascript" src="build/tags_plugin.js"></script>
  <script type="text/coffeescript" src="tags_plugin.spec.coffee"></script>

  <script type="text/javascript" src="build/autocomplete_plugin.js"></script>
  <script type="text/coffeescript" src="autocomplete_plugin.spec.coffee"></script>

  <script type="text/coffeescript">
    do ->
      window.expect = chai.expect
      window.should = chai.should
      window.spy = sinon.spy

      Assertion = chai.Assertion

      Assertion.addChainableMethod 'happen'
        , ->
          null
        , ->
          @__flags.waitForHappen = true

      Assertion.addChainableMethod 'notify', (done) ->
        next = =>
          id = setTimeout =>
            result = @_obj()

            if result
              done()
            else if not runner.test.timedOut
              next()
          , 0

        next() if @__flags.waitForHappen

      $.fx.off = true

      runner = mocha.run()
  </script>

</head>

<body>
  <div id="mocha"></div>
</body>
</html>

